# 软件架构风格

### 数据流风格

##### 特点

- 数据的一步一步流动，以这个为导向的风格
- 把数据的处理分步骤进行，第一步的输出做为第二步的输入，以此类推完成数据处理
- 类似C语言的编译过程，词法分析、语法分析、语义分析，一步步完成任务
- 由于前一步的处理结果是后一步的输入，数据起到推动流程运转的作用，所以又称为数据驱动

##### 优点

- 数据和处理是分开的，通过顺序衔接起来，所以这种结构是高内聚低耦合的
- 同时每一个职能都是分块处理的，所以有良好的重用性/可维护性
- 可扩展性
- 良好的隐蔽性
- 支持并行

##### 缺点

- 用户交互性差
- 复杂性较高
- 性能较差（每个过滤器都需要解析与合成数据）

##### 典型应用

- 传统编译器（现在的集成开发环境已经不是数据流风格了）
- 网络报文处理

##### 子风格

- 批处理序列：大量整体数据、无需用户交互
  - 数据量大
  - 数据是以整体、整块形式传输
- 管道过滤器：流式数据、弱用户交互
  - 流式数据，不用等到所有处理完才进入到下一步

### 调用返回风格

![image-20230919205940732](系统架构设计.assets/image-20230919205940732.png)

- 主函数调用子函数
- 子函数执行计算
- 子函数将计算结果返回给主函数

##### 思想

一个完整的系统过于繁杂，将其分成多个层级，每个层级各司其职的去处理它们层次该处理的问题。层与层之间进行调用返回的机制来完成相应的职能。

这样把系统分成多个部分，而且每一个部分有独立的职能，这样每个构件利于达到高内聚低耦合的效果。同时有良好的复用和维护扩展。

严格的分层只允许两个层次间交互，不严格的分层允许跨层次交互。

##### 优点

- 良好的重用性
- 可维护性好
- 可扩展性好

##### 缺点

- 不是每个系统都方便分层
- 很难找到一个合适的、正确的层次抽象方法
  - 层次分多咯，影响效率
  - 层次分少咯，逻辑结构划分不清晰，耦合性高
- 不同层次之间耦合度高的系统很难实现

##### 特点

- 每个层次的组建形成不同功能级别的虚拟机，即每个层级都能独立的完成标准化的数据处理职能
- 多层级相互协同工作，而且实现透明（层与层之间不需要知道对方是如何实现的）

##### 子风格

- 主程序/子程序：结构化时代面向过程的开发，像C语言
- 面向对象：对象的方法调用
- 分层：层与层之间的方法调用
  - 比如业务逻辑层 调用数据库层
  - ISO七层模型

### 独立构件风格

![image-20230919212336788](系统架构设计.assets/image-20230919212336788.png)

每一个构件都是独立的。每一个构件都不直接关联。和调用返回风格有着明显的区别，独立构件风格，构件构件之间不直接交互是一种松耦合的风格。

比如：点击事件的监听，接口回调。

##### 优点

- 松耦合：整个风格架构是松耦合的
- 良好的重用性/可修改性/可扩展性：构件与构件是独立的

##### 缺点

- 不直接关联的特点，使构件放弃了对系统计算的控制

##### 特点

- 系统由若干子系统构成且称为一个整体
- 系统有统一的目标
- 子系统之间有主从之分
- 每一个子系统有自己的事件收集和处理机制

##### 子风格

- 事件驱动
- 隐式调用

### 虚拟机风格

![image-20230919214742813](系统架构设计.assets/image-20230919214742813.png)

虚拟机的用途去解释和执行特定的代码，保证灵活性。有自定义特点，在自己设计的规则下运行。

能灵活应对自定义场景，复杂度较高。

##### 子风格

- 解释器
  - 适用于需要"自定义规则"的场合
- 规则为中心
  - 适用于专家系统
  - 在解释器的基础上增加经验规则

### 仓库风格

![image-20230919220252772](系统架构设计.assets/image-20230919220252772.png)

仓库风格会有用来存储数据的中央部件。各个构件从数据库获取或写入数据。

仓库风格又叫做以数据为中心的风格。

现代的程序开发IDE使用的是仓库风格同时也应用了事件风格，诸多构件（断点、变量查看）都是围绕中间的语法树。

操作系统的注册表、剪切板 是一种仓库风格

##### 子风格

- 数据库系统：
  - 以数据为中心
- 黑板系统：语音识别、知识推理
  - 特点
    - 在以数据为中心的基础上，使用中心数据触发业务逻辑部件
  - 典型实例
    - 语音识别
    - 模式识别
    - 图像处理
    - 知识推理
  - 优点
    - 可更改性和可维护性
    - 可重用的知识源
    - 容错性和健壮性
  - 缺点
    - 测试困难
    - 不能保证有好的解决方案
    - 难以建立好的控制策略
    - 低效
    - 开发困难
    - 缺少并行机制
- 超文本系统：

![image-20230919220656823](系统架构设计.assets/image-20230919220656823.png)

黑板是中央数据源，是交换数据、共享数据的机制。黑板系统是在数据库系统的基础上增加了触发机制。

### 闭环控制风格

![image-20230919222043646](系统架构设计.assets/image-20230919222043646.png)

也叫过程控制风格。

开环控制系统的特点是：数据发出后没有闭环回来

闭环系统：执行后会有反馈信息，将反馈信息进行比较看是否符合需求。典型应用：空调温控

### C2风格

![image-20230919222658614](系统架构设计.assets/image-20230919222658614.png)